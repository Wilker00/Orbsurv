<!DOCTYPE html>
<html lang="en" data-require-auth>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Camera - Orbsurv</title>
  <link rel="icon" type="image/x-icon" href="../../Image/Group 213.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="../../css/global.css">
  <link rel="stylesheet" href="../../css/shared-vars.css">
  <link rel="stylesheet" href="../../css/privacy.css">
  <link rel="stylesheet" href="../../css/index.css">
  <style>
    .wizard-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .wizard-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--space-6);
      position: relative;
    }

    .wizard-steps::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--line);
      z-index: 0;
    }

    .wizard-step {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }

    .wizard-step-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--card-bg);
      border: 2px solid var(--line);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: var(--mute);
      margin-bottom: var(--space-2);
    }

    .wizard-step.active .wizard-step-number {
      background: var(--accent-color);
      border-color: var(--accent-color);
      color: var(--bg);
    }

    .wizard-step.completed .wizard-step-number {
      background: #34d399;
      border-color: #34d399;
      color: var(--bg);
    }

    .wizard-step-label {
      font-size: 0.875rem;
      color: var(--mute);
      text-align: center;
    }

    .wizard-step.active .wizard-step-label {
      color: var(--ink);
      font-weight: 600;
    }

    .wizard-content {
      min-height: 400px;
    }

    .wizard-step-panel {
      display: none;
    }

    .wizard-step-panel.active {
      display: block;
    }

    .wizard-actions {
      display: flex;
      justify-content: space-between;
      margin-top: var(--space-6);
      padding-top: var(--space-5);
      border-top: 1px solid var(--line);
    }

    .discovery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-3);
      margin-top: var(--space-4);
    }

    .device-card {
      padding: var(--space-4);
      border: 2px solid var(--line);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .device-card:hover {
      border-color: var(--accent-color);
      box-shadow: var(--shadow-sm);
    }

    .device-card.selected {
      border-color: var(--accent-color);
      background: color-mix(in srgb, var(--accent-color) 5%, var(--card-bg));
    }

    .device-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      background: color-mix(in srgb, var(--accent-color) 15%, transparent);
      color: var(--accent-color);
      margin-bottom: var(--space-2);
    }

    @media (max-width: 768px) {
      .wizard-steps {
        flex-direction: column;
        gap: var(--space-3);
      }

      .wizard-steps::before {
        display: none;
      }

      .wizard-step {
        flex-direction: row;
        width: 100%;
        align-items: center;
        gap: var(--space-3);
      }

      .wizard-step-label {
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <header class="site-header" data-include="../../_header.html"></header>

  <main>
    <section style="background: linear-gradient(135deg, rgba(13, 110, 253, 0.08), rgba(13, 202, 240, 0.05)); border-bottom: 1px solid var(--line);">
      <div class="wrap">
        <div style="padding: clamp(24px, 3vw, 32px) 0;">
          <p style="font-size: 0.875rem; font-weight: 600; color: var(--accent-color); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: var(--space-2);">Setup</p>
          <h1>Add Camera</h1>
          <p style="color: var(--mute); font-size: 1.05rem; margin-bottom: var(--space-4);">Follow these steps to add a new camera to your system</p>
          <img src="../../Image/camera_image.png" alt="Orbsurv camera setup guide" class="camera-hero-image" style="max-width: 300px; margin: 0 auto;" loading="lazy">
        </div>
      </div>
    </section>

    <section class="section">
      <div class="wrap">
        <div class="wizard-container">
          <div class="wizard-steps">
            <div class="wizard-step active" data-step="1">
              <div class="wizard-step-number">1</div>
              <div class="wizard-step-label">Discover</div>
            </div>
            <div class="wizard-step" data-step="2">
              <div class="wizard-step-number">2</div>
              <div class="wizard-step-label">Configure</div>
            </div>
            <div class="wizard-step" data-step="3">
              <div class="wizard-step-number">3</div>
              <div class="wizard-step-label">Calibrate</div>
            </div>
            <div class="wizard-step" data-step="4">
              <div class="wizard-step-number">4</div>
              <div class="wizard-step-label">Complete</div>
            </div>
          </div>

          <div class="wizard-content">
            <!-- Step 1: Device Discovery -->
            <div class="wizard-step-panel active" data-panel="1">
              <div class="card" style="padding: clamp(16px, 2vw, 20px);">
                <h2 style="margin-bottom: var(--space-3);">Step 1: Discover Device</h2>
                <p style="color: var(--mute); margin-bottom: var(--space-4); line-height: 1.7;">
                  Scan your network for available Orbsurv cameras or enter device information manually.
                </p>
                <div style="margin-bottom: var(--space-4);">
                  <img src="../../Image/mid.jpg" alt="Camera setup example" class="camera-gallery-item" style="max-width: 100%; border-radius: var(--radius-lg);" loading="lazy">
                </div>
                <div style="display: flex; gap: clamp(12px, 1.5vw, 16px); margin-bottom: clamp(16px, 2vw, 20px);">
                  <button class="btn btn-primary" id="scan-network">
                    <i class="fa-solid fa-radar"></i> Scan Network
                  </button>
                  <button class="btn btn-outline" id="manual-entry">
                    <i class="fa-solid fa-keyboard"></i> Manual Entry
                  </button>
                </div>

                <div id="discovery-results" style="display: none;">
                  <h3 style="margin-bottom: var(--space-3); font-size: 1.125rem;">Found Devices</h3>
                  <div class="discovery-grid">
                    <div class="device-card" data-device-id="dev-001">
                      <div class="device-icon">
                        <i class="fa-solid fa-video"></i>
                      </div>
                      <div style="font-weight: 600; margin-bottom: var(--space-1);">Orbsurv Module</div>
                      <div style="color: var(--mute); font-size: 0.875rem;">Serial: ORB-2024-001</div>
                      <div style="color: var(--mute); font-size: 0.875rem;">IP: 192.168.1.105</div>
                    </div>
                  </div>
                </div>

                <div id="manual-form" style="display: none; margin-top: var(--space-4);">
                  <div class="form-field" style="margin-bottom: var(--space-3);">
                    <label for="device-serial">Device Serial Number</label>
                    <input type="text" id="device-serial" placeholder="ORB-2024-XXX" required>
                  </div>
                  <div class="form-field" style="margin-bottom: var(--space-3);">
                    <label for="device-ip">IP Address (optional)</label>
                    <input type="text" id="device-ip" placeholder="192.168.1.XXX">
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 2: Configuration -->
            <div class="wizard-step-panel" data-panel="2">
              <div class="card" style="padding: clamp(16px, 2vw, 20px);">
                <h2 style="margin-bottom: var(--space-3);">Step 2: Configure Camera</h2>
                <p style="color: var(--mute); margin-bottom: var(--space-4); line-height: 1.7;">
                  Set up your camera name, location, and network settings.
                </p>

                <form id="camera-config-form">
                  <div class="form-field" style="margin-bottom: var(--space-4);">
                    <label for="camera-name">Camera Name</label>
                    <input type="text" id="camera-name" placeholder="e.g., Front Entrance" required>
                  </div>

                  <div class="form-field" style="margin-bottom: var(--space-4);">
                    <label for="camera-location">Location</label>
                    <input type="text" id="camera-location" placeholder="e.g., Main Building - Entrance" required>
                  </div>

                  <div class="form-field" style="margin-bottom: var(--space-4);">
                    <label for="network-type">Network Connection</label>
                    <select id="network-type" required>
                      <option value="poe">PoE++ (Power over Ethernet)</option>
                      <option value="wifi">Wi-Fi 6E</option>
                      <option value="5g">5G Cellular</option>
                    </select>
                  </div>

                  <div class="form-field" style="margin-bottom: var(--space-4);">
                    <label for="feed-group">Assign to Feed Group (optional)</label>
                    <select id="feed-group">
                      <option value="">None</option>
                      <option value="group-1">Main Building</option>
                      <option value="group-2">Warehouse</option>
                      <option value="group-3">Perimeter</option>
                    </select>
                  </div>
                </form>
              </div>
            </div>

            <!-- Step 3: Calibration -->
            <div class="wizard-step-panel" data-panel="3">
              <div class="card" style="padding: clamp(16px, 2vw, 20px);">
                <h2 style="margin-bottom: var(--space-3);">Step 3: Initial Calibration</h2>
                <p style="color: var(--mute); margin-bottom: var(--space-4); line-height: 1.7;">
                  Calibrate the camera's rail system and detection zones. This will take approximately 15-30 minutes.
                </p>

                <div style="background: var(--card-bg); border: 1px solid var(--line); border-radius: var(--radius-lg); padding: var(--space-4); margin-bottom: var(--space-4);">
                  <h3 style="margin-bottom: var(--space-3); font-size: 1.125rem;">Calibration Steps</h3>
                  <ol style="color: var(--mute); line-height: 1.8; padding-left: var(--space-4); margin-bottom: var(--space-4);">
                    <li>Camera will move along the full rail length</li>
                    <li>System maps the space and rail path</li>
                    <li>Detection zones are automatically configured</li>
                    <li>AI begins learning normal activity patterns</li>
                  </ol>
                  <div class="camera-gallery" style="margin-top: var(--space-3);">
                    <div class="camera-gallery-item">
                      <img src="../../Image/left.jpg" alt="Camera calibration - left view" loading="lazy">
                    </div>
                    <div class="camera-gallery-item">
                      <img src="../../Image/right.jpg" alt="Camera calibration - right view" loading="lazy">
                    </div>
                  </div>
                </div>

                <div style="display: flex; gap: var(--space-3);">
                  <button class="btn btn-primary" id="start-calibration">
                    <i class="fa-solid fa-play"></i> Start Calibration
                  </button>
                  <button class="btn btn-outline" id="skip-calibration">
                    Skip for Now
                  </button>
                </div>

                <div id="calibration-progress" style="display: none; margin-top: var(--space-4);">
                  <div style="background: var(--card-bg); border: 1px solid var(--line); border-radius: var(--radius-lg); padding: var(--space-4);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
                      <span style="font-weight: 600;">Calibration in progress...</span>
                      <span id="calibration-percent">0%</span>
                    </div>
                    <div style="width: 100%; height: 8px; background: var(--line); border-radius: 4px; overflow: hidden;">
                      <div id="calibration-bar" style="width: 0%; height: 100%; background: var(--accent-color); border-radius: 4px; transition: width 0.3s ease;"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 4: Complete -->
            <div class="wizard-step-panel" data-panel="4">
              <div class="card" style="padding: clamp(16px, 2vw, 20px); text-align: center;">
                <div style="width: 80px; height: 80px; margin: 0 auto var(--space-4); display: flex; align-items: center; justify-content: center; border-radius: 50%; background: color-mix(in srgb, #34d399 20%, transparent);">
                  <i class="fa-solid fa-check" style="font-size: 2.5rem; color: #34d399;"></i>
                </div>
                <h2 style="margin-bottom: var(--space-3);">Camera Added Successfully!</h2>
                <p style="color: var(--mute); margin-bottom: clamp(16px, 2vw, 20px); line-height: 1.7; max-width: 60ch; margin-left: auto; margin-right: auto;">
                  Your camera has been added and is ready to use. You can now view live feeds, configure settings, and manage access.
                </p>
                <div style="display: flex; gap: var(--space-3); justify-content: center; flex-wrap: wrap;">
                  <a href="../cameras.html" class="btn btn-primary">View All Cameras</a>
                  <a href="configure.html" class="btn btn-secondary">Configure Camera</a>
                  <a href="../dashboard.html" class="btn btn-outline">Go to Dashboard</a>
                </div>
              </div>
            </div>

            <div class="wizard-actions">
              <button class="btn btn-outline" id="wizard-back" style="display: none;">
                <i class="fa-solid fa-arrow-left"></i> Back
              </button>
              <div style="flex: 1;"></div>
              <button class="btn btn-primary" id="wizard-next">
                Next <i class="fa-solid fa-arrow-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer" data-include="../../_footer.html"></footer>

  <script src="../../js/global.js"></script>
  <script src="../../js/forms.js"></script>
  <script src="../../js/index.js"></script>
  <script>
    let currentStep = 1;
    const totalSteps = 4;

    function updateWizard() {
      // Update step indicators
      document.querySelectorAll('.wizard-step').forEach((step, index) => {
        const stepNum = index + 1;
        step.classList.remove('active', 'completed');
        if (stepNum < currentStep) {
          step.classList.add('completed');
          step.querySelector('.wizard-step-number').innerHTML = '<i class="fa-solid fa-check"></i>';
        } else if (stepNum === currentStep) {
          step.classList.add('active');
        }
      });

      // Update panels
      document.querySelectorAll('.wizard-step-panel').forEach((panel, index) => {
        panel.classList.toggle('active', index + 1 === currentStep);
      });

      // Update buttons
      document.getElementById('wizard-back').style.display = currentStep > 1 ? 'block' : 'none';
      document.getElementById('wizard-next').textContent = currentStep === totalSteps ? 'Finish' : 'Next';
      if (currentStep === totalSteps) {
        document.getElementById('wizard-next').innerHTML = 'Finish <i class="fa-solid fa-check"></i>';
      }
    }

    document.getElementById('wizard-next').addEventListener('click', () => {
      if (currentStep < totalSteps) {
        currentStep++;
        updateWizard();
      } else {
        window.location.href = '../cameras.html';
      }
    });

    document.getElementById('wizard-back').addEventListener('click', () => {
      if (currentStep > 1) {
        currentStep--;
        updateWizard();
      }
    });

    document.getElementById('scan-network').addEventListener('click', () => {
      document.getElementById('discovery-results').style.display = 'block';
      document.getElementById('manual-form').style.display = 'none';
    });

    document.getElementById('manual-entry').addEventListener('click', () => {
      document.getElementById('manual-form').style.display = 'block';
      document.getElementById('discovery-results').style.display = 'none';
    });

    document.querySelectorAll('.device-card').forEach(card => {
      card.addEventListener('click', function() {
        document.querySelectorAll('.device-card').forEach(c => c.classList.remove('selected'));
        this.classList.add('selected');
      });
    });

    document.getElementById('start-calibration').addEventListener('click', () => {
      document.getElementById('calibration-progress').style.display = 'block';
      let progress = 0;
      const interval = setInterval(() => {
        progress += 2;
        document.getElementById('calibration-bar').style.width = progress + '%';
        document.getElementById('calibration-percent').textContent = progress + '%';
        if (progress >= 100) {
          clearInterval(interval);
          setTimeout(() => {
            currentStep++;
            updateWizard();
          }, 1000);
        }
      }, 100);
    });

    document.getElementById('skip-calibration').addEventListener('click', () => {
      currentStep++;
      updateWizard();
    });

    updateWizard();
  </script>
  <script src="../../js/global.js"></script>
  <script src="../../js/forms.js"></script>
  <script src="../../js/auth-guard.js"></script>
</body>
</html>







